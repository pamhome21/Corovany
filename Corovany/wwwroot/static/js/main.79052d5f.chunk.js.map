{"version":3,"sources":["store/ActionType.ts","store/selectors.ts","store/actions.ts","interfaces/GameInterfaces.ts","components/TextGameDisplay.tsx","components/GraphicalGameDisplay.tsx","views/BattleView.tsx","App.tsx","serviceWorker.ts","sockets/sockets.ts","store/reducers/GameState.ts","store/reducers/Logs.ts","store/reducers/Control.ts","store/reducers/index.ts","store/store.ts","index.tsx"],"names":["ActionType","getCommands","store","Logs","commands","getSpells","spellLog","getQueue","GameState","queue","getCurrentUnit","currentUnit","getUnits","units","getPlayer","players","getCharacters","characters","getGameState","state","won","getSelectedPerk","Control","selectedPerk","getTurnCounter","turnCounter","UnitState","ExecuteCommand","payload","type","gameStateNames","uninitialized","stateReady","combatReady","finished","unitStates","TextGameDisplay","props","player","useSelector","gameState","style","backgroundColor","overflowY","height","width","marginLeft","Name","Id","filter","c","map","i","key","CharClass","HealthPoints","Initiative","MoralePoints","SpecialPoints","Character","Perks","p","Cost","Description","u","State","GraphicalGameDisplay","spells","dispatch","useDispatch","useEffect","Type","Args","xlinkHref","y","transform","onClick","name","prompt","alert","x","fill","stroke","fontSize","textAnchor","OwnerId","unit","index","UnitComponent","perk","className","SelectPerk","SkillFile","Cooldown","Array","length","e","UnitInQueue","spell","CurrentUnit","Perk","Target","controls","loop","autoPlay","src","enemy","currentPerk","isWindowsKeyCorrect","window","location","hash","includes","Fine","Bar","color","value","Runaway","imageRendering","Dead","BattleView","useState","playerId","updatePlayerId","playerName","updatePlayerName","perkKey","updatePerkKey","targetKey","updateTargetKey","float","placeholder","onChange","target","overflow","App","Boolean","hostname","match","connection","signalR","withUrl","build","on","commandName","command","AddCommand","newCommand","connectionPromise","start","catch","err","console","log","SendMessage","message","a","send","initialState","rootReducer","combineReducers","action","JSON","stringify","commandValue","parse","Units","Queue","TurnCounter","createStore","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","error"],"mappings":"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","file":"static/js/main.79052d5f.chunk.js","sourcesContent":["export enum ActionType {\n    ExecuteCommand,\n    AddCommand,\n    SelectPerk,\n}","import {RootState} from \"./reducers\";\n\nexport const getCommands = (store: RootState) => store.Logs.commands;\n\nexport const getSpells = (store: RootState) => store.Logs.spellLog;\n\nexport const getQueue = (store: RootState) => store.GameState.queue;\n\nexport const getCurrentUnit = (store: RootState) => store.GameState.currentUnit;\n\nexport const getUnits = (store: RootState) => store.GameState.units;\n\nexport const getPlayer = (store: RootState) => store.GameState.players[0];\n\nexport const getCharacters = (store: RootState) => store.GameState.characters;\n\nexport const getGameState = (store: RootState) => ({\n    state: store.GameState.state,\n    won: store.GameState.won\n});\n\nexport const getSelectedPerk = (store: RootState) => store.Control.selectedPerk;\n\nexport const getTurnCounter = (store: RootState) => store.GameState.turnCounter;","import {ActionType} from \"./ActionType\";\nimport {Perk, Unit} from \"../interfaces/GameInterfaces\";\n\nexport interface Action {\n    type: ActionType\n    payload?: any\n}\n\ninterface Command {\n    Type: string,\n    Args: string[]\n}\n\nexport const ExecuteCommand: (payload: Command) => Action = (payload: Command) => ({\n    type: ActionType.ExecuteCommand,\n    payload\n})\n\nexport const AddCommand: (command: string, commandName: string) => Action = (command: string, commandName: string) => ({\n    type: ActionType.AddCommand,\n    payload: {\n        commandName,\n        newCommand: command\n    }\n})\n\nexport const SelectPerk: (perk: Perk, unit: Unit) => Action = (perk: Perk, unit: Unit) => ({\n    type: ActionType.SelectPerk,\n    payload: {perk, unit}\n})","export interface Player {\n    Name: string\n    Id: string\n}\n\nexport interface Character {\n    Name: string\n    CharClass: CharacterClass\n    Level: number\n    Initiative: number\n    HealthPoints: number\n    MoralePoints: number\n    SpecialPoints: number\n    OwnerId: string\n}\n\nexport interface CharacterClass {\n    Name: string\n    HealthPoints: number\n    MoralePoints: number\n    SpecialPoints: number\n    Initiative: number\n    Perks: Perk[]\n}\n\nexport interface Perk {\n    Name: string\n    SkillFile: string\n    Description: string\n    Cost: number\n    Cooldown: number\n    LevelToUnlock: number\n}\n\nexport interface Unit {\n    Character: Character\n    HealthPoints: number\n    MoralePoints: number\n    SpecialPoints: number\n    Initiative: number\n    State: UnitState\n    Cooldown: {\n        [key: string]: number\n    }\n}\n\nexport enum UnitState {\n    Fine = 0,\n    Runaway = 1,\n    Dead = 2,\n}","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport {getCharacters, getCurrentUnit, getGameState, getPlayer, getQueue, getUnits} from \"../store/selectors\";\n\nconst gameStateNames = {\n    uninitialized: 'Не инициализированно',\n    stateReady: 'Подготовка к бою',\n    combatReady: 'Бой идет',\n    finished: 'Бой окончен'\n}\n\nconst unitStates = [\n    'Активен',\n    'Сбежал',\n    'Мертв',\n]\n\nexport function TextGameDisplay(props: any) {\n    const player = useSelector(getPlayer);\n    const gameState = useSelector(getGameState);\n    const characters = useSelector(getCharacters);\n    const units = useSelector(getUnits);\n    const queue = useSelector(getQueue);\n    const currentUnit = useSelector(getCurrentUnit);\n\n    return <div style={{\n        backgroundColor: 'rgb(245, 245, 245)',\n        overflowY: 'scroll',\n        height: '600px',\n        width: '100%'\n    }}>\n        <p>Состояние:</p>\n        <div style={{marginLeft: '15px'}}>\n            <p>Игра находится в состоянии \"{gameStateNames[gameState.state]}\".\n                {gameState.state === \"finished\" && `Результат боя: ${gameState.won ? 'Победа' : 'Билли Бонс умер...'}`}</p>\n            {player && <p>Игрок {player.Name} с ID {player.Id}</p>}\n        </div>\n        {(gameState.state === 'stateReady' || gameState.state === 'combatReady' || gameState.state === 'finished') && <>\n            <p>Персонажи:</p>\n            <div style={{marginLeft: '15px'}}>\n                {characters.filter(c => c !== null).map((c, i) => <div key={i}>\n                    <p>Имя: {c.Name}</p>\n                    <div style={{marginLeft: '15px'}}>\n                        <p>Класс: {c.CharClass.Name}</p>\n                        <p>Здоровье: {c.HealthPoints}</p>\n                        <p>Инициатива: {c.Initiative}</p>\n                        <p>Мораль: {c.MoralePoints}</p>\n                        <p>Очки способностей: {c.SpecialPoints}</p>\n                    </div>\n                </div>)}\n            </div>\n        </>}\n        {(gameState.state === 'combatReady' || gameState.state === 'finished') && currentUnit && <>\n            <p>Текущий юнит: {currentUnit.Character.Name}</p>\n            <p>Способности:</p>\n            <div style={{marginLeft: '15px'}}>\n                {currentUnit.Character.CharClass.Perks.map((p, i) => <div key={i}>\n                    <p>Название: {p.Name}</p>\n                    <div style={{marginLeft: '15px'}}>\n                        <p>Стоимость: {p.Cost}</p>\n                        <p>Описание: {p.Description}</p>\n                    </div>\n                </div>)}\n            </div>\n        </>}\n        {(gameState.state === 'combatReady' || gameState.state === 'finished') && <>\n            <p>Юниты:</p>\n            <div style={{marginLeft: '15px'}}>\n                {units.map((u, i) => <div key={i}>\n                    <p>Имя: {u.Character.Name}</p>\n                    <div style={{marginLeft: '15px'}}>\n                        <p>Класс: {u.Character.CharClass.Name}</p>\n                        <p>Текущее здоровье: {u.HealthPoints}</p>\n                        <p>Текущая инициатива: {u.Initiative}</p>\n                        <p>Текущая мораль: {u.MoralePoints}</p>\n                        <p>Текущие очки способностей: {u.SpecialPoints}</p>\n                        <p>Состояние: {unitStates[u.State]}</p>\n                    </div>\n                </div>)}\n            </div>\n        </>}\n        {(gameState.state === 'combatReady' || gameState.state === 'finished') && <>\n            <p>Очередь:</p>\n            <div style={{marginLeft: '15px'}}>\n                {queue.map((u, i) => <span key={i}>{u.Character.Name}, </span>)}\n            </div>\n        </>}\n\n    </div>\n}","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    getCurrentUnit,\n    getGameState,\n    getPlayer,\n    getQueue,\n    getSelectedPerk,\n    getSpells, getTurnCounter,\n    getUnits\n} from \"../store/selectors\";\nimport {ExecuteCommand, SelectPerk} from \"../store/actions\";\nimport {Unit, UnitState} from \"../interfaces/GameInterfaces\";\n\n// const gameStateNames = {\n//     uninitialized: 'Не инициализированно',\n//     stateReady: 'Подготовка к бою',\n//     combatReady: 'Бой идет',\n//     finished: 'Бой окончен'\n// }\n//\n// const unitStates = [\n//     'Активен',\n//     'Сбежал',\n//     'Мертв',\n// ]\n\nexport function GraphicalGameDisplay(props: any) {\n    const player = useSelector(getPlayer);\n    const gameState = useSelector(getGameState);\n    // const characters = useSelector(getCharacters);\n    const units = useSelector(getUnits);\n    const queue = useSelector(getQueue);\n    const currentUnit = useSelector(getCurrentUnit);\n    const selectedPerk = useSelector(getSelectedPerk);\n    const spells = useSelector(getSpells);\n    const turnCounter = useSelector(getTurnCounter);\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(ExecuteCommand({\n            Type: 'ReceiveFullDataStateCommand',\n            Args: [],\n        }))\n    }, [])\n    const beginGame = () => {\n        const name = prompt('Your name?');\n        if (!name) {\n            alert('Need name');\n            return\n        }\n        dispatch(ExecuteCommand({\n            Type: 'AddPlayerCommand',\n            Args: ['0', name],\n        }))\n    }\n    const resetGame = () => {\n        dispatch(ExecuteCommand({\n            Type: 'InitializeGameStateResetCommand',\n            Args: [],\n        }))\n    }\n    return <>\n        <svg height={720} width={800}>\n            <image xlinkHref={'Resources/Panels/top_panel.png'}/>\n            <image y={50} xlinkHref={'Resources/Stages/desert_map.png'}/>\n            <image transform={'scale(1, 0.6)'} y={600 * (1 / 0.6)} xlinkHref={'Resources/Panels/bottom_panel.png'}/>\n            {gameState.state === 'uninitialized' && <>\n                <g onClick={beginGame}>\n                    <rect y={320} x={300} width={200} height={80} fill={'white'} stroke={'black'}/>\n                    <text y={365} x={335} fontSize={30}>Start game</text>\n                </g>\n            </>}\n            {player && <>\n                <text textAnchor={'end'} x={800 - 15} y={20} fill={'white'}>Player name: {player.Name}</text>\n                <text textAnchor={'end'} x={800 - 15} y={40} fill={'lightgray'}>ID: {player.Id}</text>\n            </>}\n\n            {(gameState.state === 'combatReady' || gameState.state === 'finished') && currentUnit && <>\n                {units.filter(u => u.Character.OwnerId !== null).map((unit, index) =>\n                    <UnitComponent unit={unit} key={index} index={index}/>)}\n                {units.filter(u => u.Character.OwnerId === null).map((unit, index) =>\n                    <UnitComponent unit={unit} key={index} index={index}/>)}\n                <svg y={600}>\n                    <image width={128} height={128}\n                           xlinkHref={`Resources/Characters/${currentUnit.Character.CharClass.Name}/prev.png`}/>\n                    <text fill={'white'} x={115} y={25}>{currentUnit.Character.Name}</text>\n                    <text fill={'white'} x={115} y={45}>{currentUnit.Character.CharClass.Name}</text>\n                    <text fill={'pink'} x={115}\n                          y={65}>{currentUnit.HealthPoints}/{currentUnit.Character.HealthPoints}</text>\n                    <text fill={'yellow'} x={115}\n                          y={85}>{currentUnit.MoralePoints}/{currentUnit.Character.MoralePoints}</text>\n                    <text fill={'cyan'} x={115}\n                          y={105}>{currentUnit.SpecialPoints}/{currentUnit.Character.SpecialPoints}</text>\n                </svg>\n                {currentUnit.Character.CharClass.Perks.map((perk, index) =>\n                    <svg className={'hover-target'} onClick={() => dispatch(SelectPerk(perk, currentUnit))} key={index} y={590}\n                         x={200 + index * 150}>\n                        <image width={120} height={120} xlinkHref={`Resources/Skills/${perk.SkillFile}.png`}/>\n                        <text textAnchor={'middle'} y={120} x={60} fill={'white'}>{perk.Name}</text>\n                        {perk === selectedPerk &&\n                        <image width={120} height={120} xlinkHref={`Resources/Stars/good_guy_star.png`}/>}\n                        <text y={100} x={80} fill={perk.Cost <= currentUnit.SpecialPoints ? 'cyan' : 'red'}>{perk.Cost}</text>\n                        {currentUnit.Cooldown[perk.Name] > 0 &&\n                        <text y={82} x={40} fill={'white'} stroke={'black'} fontSize={75}>{currentUnit.Cooldown[perk.Name]}</text>}\n                        <foreignObject y={0} x={0} width={120} height={120}>\n                            <p className={'hover-text'}>{perk.Description}</p>\n                        </foreignObject>\n                    </svg>)}\n                {new Array(4 - currentUnit.Character.CharClass.Perks.length).fill(0).map((e, index) =>\n                    <svg key={index} y={590} x={200 + (currentUnit.Character.CharClass.Perks.length + index) * 150}>\n                        <image width={120} height={120} xlinkHref={`Resources/Skills/locked_skill.png`}/>\n                    </svg>\n                )}\n                <rect width={50} height={50} fill={'none'} stroke={'black'}/>\n                <UnitInQueue unit={currentUnit} index={0}/>\n                {queue.map((unit, index) => <UnitInQueue unit={unit} index={index + 1} key={index}/>)}\n            </>}\n            {gameState.state === 'finished' && <>\n                <g>\n                    <rect y={320} x={300} width={200} height={80} fill={'white'} stroke={'black'}/>\n                    <text y={365} x={350} fontSize={30}>{gameState.won ? 'You won' : 'You lost'}</text>\n                </g>\n                <g onClick={resetGame}>\n                    <rect y={400} x={300} width={200} height={80} fill={'white'} stroke={'black'}/>\n                    <text y={445} x={335} fontSize={30}>Play again?</text>\n                </g> \n            </>}\n            <text x={400} y={100} fontSize={60} textAnchor={'middle'}>TURN {turnCounter}</text>\n        </svg>\n        <div style={{height: '200px', overflowY: 'scroll', backgroundColor: 'lightgray'}}>\n            {spells.map((spell, i) =>\n                <p key={i}>{spell.CurrentUnit.Character.Name} used\n                    ability {spell.Perk.Name} to {spell.Target.Character.Name} ({spell.Perk.Description})</p>)}\n            {gameState.state === 'combatReady' && <audio controls loop autoPlay src={'Resources/Audio/bgm.webm'}/>}\n        </div>\n    </>\n}\n\ninterface UnitProps {\n    unit: Unit,\n    index: number,\n}\n\nfunction UnitComponent({unit, index}: UnitProps) {\n    const enemy = unit.Character.OwnerId === null;\n    const currentPerk = useSelector(getSelectedPerk);\n    const currentUnit = useSelector(getCurrentUnit);\n    const gameState = useSelector(getGameState);\n    const dispatch = useDispatch();\n    const correctKey = '7754321';\n    const isWindowsKeyCorrect = window.location.hash.includes(correctKey);\n    const executeNextTurnCommand = () => {\n        if (!currentPerk) {\n            alert('You need to select perk');\n            return\n        }\n        if (!gameState){\n            return\n        }\n        if (currentUnit && (currentUnit.Character.OwnerId !== null || isWindowsKeyCorrect))\n            dispatch(ExecuteCommand({\n                Type: 'NextTurnCommand',\n                Args: [currentPerk.Name, unit.Character.Name]\n            }))\n    }\n    return <svg onClick={executeNextTurnCommand} y={270 + index * 105}\n                x={(enemy ? 500 : 220) - index * 20 * (enemy ? -1 : 1)} className={'hover-target'}>\n        {unit.State === UnitState.Fine && <>\n            <Bar x={24} y={2} color={'rgb(49, 191, 19)'} value={unit.HealthPoints / unit.Character.HealthPoints}/>\n            <Bar x={24} y={8} color={'rgb(255, 179, 11)'} value={unit.MoralePoints / unit.Character.MoralePoints}/>\n            <Bar x={24} y={14} color={'rgb(109, 195, 235)'}\n                 value={unit.SpecialPoints / unit.Character.SpecialPoints}/>\n        </>}\n        {currentUnit && unit.Character.Name === currentUnit.Character.Name &&\n        <rect x={22} y={0} width={68} height={20} fill={'none'} stroke={'rgb(1, 22, 39)'}/>}\n        {unit.State !== UnitState.Runaway && <image style={{\n            imageRendering: 'pixelated',\n        }}\n                width={96} height={96} x={enemy && unit.State !== UnitState.Dead ? -96 : 0}\n                transform={(enemy ? 'scale(-1, 1)' : '')\n                + (unit.State === UnitState.Dead && enemy ? 'translate(-96, 0) rotate(-90, 48, 48)' : '')\n                + (unit.State === UnitState.Dead && !enemy ? 'rotate(-90, 48, 48)' : '')\n                } y={16}\n                xlinkHref={`Resources/Characters/${unit.Character.CharClass.Name}/char.png`}/>}\n        {unit.State === UnitState.Runaway && <image width={96} height={96} xlinkHref={`Resources/Characters/retreated_character.png`}/>}\n        <foreignObject y={50} x={0} width={210} height={120}>\n            <div className={'hover-text'}>{unit.Character.Name} ({unit.HealthPoints}/{unit.Character.HealthPoints}) ({unit.MoralePoints}/{unit.Character.MoralePoints})</div>\n        </foreignObject>\n    </svg>\n}\n\ninterface BarProps {\n    x: number,\n    y: number,\n    color: string,\n    value: number,\n}\n\nfunction Bar({x, y, color, value}: BarProps) {\n    return <>\n        <rect stroke={'black'} height={5} width={64} x={x} y={y} fill={'rgb(102, 102, 102)'}/>\n        <rect height={5} width={64 * (value >= 0 ? value : 0)} x={x} y={y} fill={color}/>\n    </>\n}\n\nfunction UnitInQueue({unit, index}: UnitProps) {\n    const enemy = unit.Character.OwnerId === null;\n    return <svg className={'hover-target'} x={-4 + index * 54}>\n        <image y={-4} width={60} height={60} transform={enemy ? 'scale(-1, 1)' : ''} x={enemy ? -60 : 0}\n               xlinkHref={`Resources/Characters/${unit.Character.CharClass.Name}/prev.png`}/>\n        <image y={-4} width={60} height={60} transform={enemy ? 'scale(-1, 1)' : ''} x={enemy ? -60 : 0}\n               xlinkHref={enemy ? 'Resources/Stars/bad_guy_star.png' : 'Resources/Stars/good_guy_star.png'}/>\n        <foreignObject y={50} x={0} width={120} height={120}>\n            <p className={'hover-text'}>{unit.Character.Name}</p>\n        </foreignObject>\n    </svg>\n}","import React, {useState} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getCommands, getSpells} from \"../store/selectors\";\nimport {ExecuteCommand} from \"../store/actions\";\nimport {TextGameDisplay} from \"../components/TextGameDisplay\";\nimport {GraphicalGameDisplay} from \"../components/GraphicalGameDisplay\";\n\n// Displays battle actions\nexport function BattleView(props: any) {\n    const spells = useSelector(getSpells);\n    const commands = useSelector(getCommands);\n    const dispatch = useDispatch();\n    const executeInitState = () => {\n        dispatch(ExecuteCommand({\n            Type: 'InitializeGameCommand',\n            Args: [],\n        }))\n    }\n    const [playerId, updatePlayerId] = useState('');\n    const [playerName, updatePlayerName] = useState('');\n    const executeAddPlayer = () => {\n        dispatch(ExecuteCommand({\n            Type: 'AddPlayerCommand',\n            Args: [playerId, playerName]\n        }))\n    }\n    const executeInitializeCombatSystem = () => {\n        dispatch(ExecuteCommand({\n            Type: 'InitializeCombatSystemCommand',\n            Args: [],\n        }))\n    }\n    const [perkKey, updatePerkKey] = useState('');\n    const [targetKey, updateTargetKey] = useState('');\n    const executeNextTurnCommand = () => {\n        dispatch(ExecuteCommand({\n            Type: 'NextTurnCommand',\n            Args: [perkKey, targetKey]\n        }))\n    }\n    const executeResetCommand = () => {\n        dispatch(ExecuteCommand({\n            Type: 'InitializeGameStateResetCommand',\n            Args: [],\n        }))\n    }\n\n    const executeReceiveFullDataStateCommand = () => {\n        dispatch(ExecuteCommand({\n            Type: 'ReceiveFullDataStateCommand',\n            Args: [],\n        }))\n    }\n    return <>\n        <div style={{float: 'left'}}>\n            <div style={{\n                backgroundColor: 'rgb(250, 250, 250)',\n                width: '40vw',\n            }}>\n                <div>\n                    <button onClick={executeAddPlayer}>Execute add player</button>\n                    <input placeholder={'id'} onChange={(e) => updatePlayerId(e.target.value)}/>\n                    <input placeholder={'name'} onChange={(e) => updatePlayerName(e.target.value)}/>\n                </div>\n                <div>\n                    <button onClick={executeInitState}>Execute init state</button>\n                </div>\n                <div>\n                    <button onClick={executeInitializeCombatSystem}>Execute initialize combat system</button>\n                </div>\n                <div>\n                    <button onClick={executeNextTurnCommand}>Execute next turn command</button>\n                    <input placeholder={'perkKey'} onChange={(e) => updatePerkKey(e.target.value)}/>\n                    <input placeholder={'targetKey'} onChange={(e) => updateTargetKey(e.target.value)}/>\n                </div>\n                <div>\n                    <button onClick={executeResetCommand}>Execute reset command</button>\n                </div>\n                <div>\n                    <button\n                        onClick={executeReceiveFullDataStateCommand}>Execute receive full data state command</button>\n                </div>\n            </div>\n            <div>\n                <TextGameDisplay/>\n            </div>\n            <div style={{\n                height: '200px',\n                width: '40vw',\n                overflow: 'scroll',\n                backgroundColor: 'rgb(235, 235, 235)'\n            }}>\n                <p>Команды:</p>\n                <div style={{marginLeft: '15px'}}>\n                    {commands.map((spell, i) => <pre key={i}>{spell}</pre>)}\n                </div>\n            </div>\n        </div>\n\n        <div style={{float: 'left'}}>\n            <GraphicalGameDisplay/>\n        </div>\n    </>\n}   ","import React from 'react';\nimport './App.css';\nimport {BattleView} from \"./views/BattleView\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BattleView />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as signalR from '@microsoft/signalr';\nimport {store} from '../store/store';\nimport {AddCommand} from \"../store/actions\";\n\nconst connection = new signalR.HubConnectionBuilder().withUrl('/hub').build();\n\nconnection.on('newCommand', (commandName: string, command: string) => {\n    store.dispatch(AddCommand(command, commandName));\n});\n\nconst connectionPromise = connection.start().catch(err => console.log(err));\n\nexport async function SendMessage(message: string) {\n    await connectionPromise;\n    await connection.send('NewCommand', message);\n}","import {ActionType} from \"../ActionType\";\nimport {Action, ExecuteCommand} from \"../actions\";\nimport {SendMessage} from \"../../sockets/sockets\";\nimport {Character, Player, Unit} from \"../../interfaces/GameInterfaces\";\n\nexport interface ApplicationState {\n    state: 'uninitialized' | 'stateReady' | 'combatReady' | 'finished'\n    currentUnit: Unit | null\n    units: Unit[]\n    queue: Unit[]\n    players: Player[]\n    characters: Character[]\n    won: boolean\n    turnCounter: number\n}\n\nconst initialState: ApplicationState = {\n    state: 'uninitialized',\n    players: [],\n    characters: [],\n    currentUnit: null,\n    units: [],\n    queue: [],\n    won: false,\n    turnCounter: 0,\n}\n\nexport default function (state = initialState, action: Action): ApplicationState {\n    switch (action.type) {\n        case ActionType.ExecuteCommand:\n            SendMessage(JSON.stringify(action.payload));\n            return state\n        case ActionType.AddCommand:\n            const commandValue = JSON.parse(action.payload.newCommand);\n            switch (action.payload.commandName) {\n                case('PlayerAdded'):\n                    if (commandValue.length > 0 && state.state === 'uninitialized'){\n                        SendMessage(JSON.stringify({\n                            Type: 'InitializeGameCommand',\n                            Args: [],\n                        }));\n                    }\n                    return {\n                        ...state,\n                        players: commandValue,\n                    }\n                case('GameInitialized'):\n                    if (state.state === 'uninitialized'){\n                        SendMessage(JSON.stringify({\n                            Type: 'InitializeCombatSystemCommand',\n                            Args: [],\n                        }))\n                    }\n                    return {\n                        ...state,\n                        state: 'stateReady',\n                        characters: commandValue\n                    }\n                case('BattleFieldUpdated'):\n                    return {\n                        ...state,\n                        state: state.state !== 'finished' ? 'combatReady' : \"finished\",\n                        currentUnit: commandValue.CurrentUnit,\n                        units: commandValue.Units,\n                        queue: commandValue.Queue,\n                        turnCounter: commandValue.TurnCounter,\n                    }\n                case('BattleEnd'):\n                    return {\n                        ...state,\n                        state: 'finished',\n                        won: commandValue,\n                    }\n                case('FrontendError'):\n                    // alert(action.payload.newCommand);\n                    return state\n                case('Reset'):\n                    return initialState\n                default:\n                    return state\n            }\n        default:\n            return state;\n    }\n}","import {Action} from \"../actions\";\nimport {ActionType} from \"../ActionType\";\nimport {Perk, Unit} from \"../../interfaces/GameInterfaces\";\n\ninterface LogState {\n    commands: string[]\n    spellLog: combatAction[]\n}\n\nconst initialState: LogState = {\n    commands: [],\n    spellLog: [],\n}\n\nexport default function(state = initialState, action: Action): LogState{\n    switch (action.type) {\n        case ActionType.ExecuteCommand:\n            return {\n                ...state,\n                commands: [...state.commands, `To server: ${JSON.stringify(action.payload)}`]\n            };\n        case ActionType.AddCommand:\n            if (action.payload.commandName === 'Reset')\n                return initialState\n            return {\n                ...state,\n                commands: [...state.commands,\n                    `From server(${action.payload.commandName})`],\n                spellLog: action.payload.commandName === 'FrontendSpellLog' ?\n                    [...state.spellLog, JSON.parse(action.payload.newCommand) as combatAction] : state.spellLog,\n            }\n        default:\n            return state\n    }\n} \n\ninterface combatAction{\n    CurrentUnit: Unit\n    Perk: Perk\n    Target: Unit\n}","import {Action} from \"../actions\";\nimport {ActionType} from \"../ActionType\";\nimport {Perk, Unit} from \"../../interfaces/GameInterfaces\";\n\ninterface ControlState {\n    selectedPerk: Perk | null\n}\n\nconst initialState: ControlState = {\n    selectedPerk: null,\n}\n\nexport default function (state = initialState, action: Action): ControlState {\n    switch (action.type) {\n        case ActionType.SelectPerk:\n            const selectedPerk = action.payload.perk as Perk;\n            const currentUnit = action.payload.unit as Unit;\n            if (selectedPerk.Cost > currentUnit.SpecialPoints || currentUnit.Cooldown[selectedPerk.Name] !== 0)\n                return state\n            return {\n                ...state,\n                selectedPerk,\n            }\n        case ActionType.ExecuteCommand:\n            if (action.payload.Type === 'NextTurnCommand')\n                return {\n                    ...state,\n                    selectedPerk: null,\n                }\n            return state;\n        default:\n            return state\n    }\n}","import {combineReducers} from \"redux\";\nimport GameState from \"./GameState\";\nimport Logs from \"./Logs\"\nimport Control from \"./Control\";\n\nexport const rootReducer = combineReducers({GameState, Logs, Control});\n\nexport type RootState = ReturnType<typeof rootReducer>;","import {createStore} from 'redux';\nimport {rootReducer} from \"./reducers\";\n\nexport const store = createStore(rootReducer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {store} from './store/store';\nimport {Provider} from 'react-redux';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}